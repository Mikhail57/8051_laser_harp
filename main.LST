C51 COMPILER V9.57.0.0   MAIN                                                              03/09/2018 18:00:27 PAGE 1   


C51 COMPILER V9.57.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\build\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.exe main.c ROM(COMPACT) OPTIMIZE(8,SPEED) TABS(2) OBJECT(.\build\main.obj)

line level    source

*** WARNING C500 IN LINE 1 OF main.c: LICENSE ERROR (R207(2): REGISTRY READ ERROR)

   1          #include <reg52.h>
   2          
   3          #define A1 182
   4          #define B1 161
   5          #define C1 153
   6          #define D1 136
   7          #define E1 121
   8          #define F1 114
   9          #define G1 102
  10          
  11          /*
  12          Inverse order of bits in this way:
  13          abcdefgh - efghabcd - ghefcdab - hgfedcba
  14          */
  15          unsigned char invert(unsigned char b) {        
  16   1        b = ((b >> 4) & 15) | ((b & 15) << 4);
  17   1        b = ((b >> 2) & 51) | ((b & 51) << 2);
  18   1        b = ((b >> 1) & 85) | ((b & 85) << 1);
  19   1        return b;
  20   1      }
  21          
  22          unsigned char resValues;
  23          unsigned char tone = 1;
  24          unsigned start_count;
  25          unsigned current_count;
  26          unsigned diff;
  27          
  28          sbit out = P3 ^ 4;
  29          sbit lowPitch = P3 ^ 5;
  30          sbit mediumPitch = P3 ^ 6;
  31          sbit highPitch = P3 ^ 7;
  32          
  33          sbit A = P2 ^ 7;
  34          sbit _B = P2 ^ 6;
  35          sbit C = P2 ^ 5;
  36          sbit D = P2 ^ 4;
  37          sbit E = P2 ^ 3;
  38          sbit F = P2 ^ 2;
  39          sbit G = P2 ^ 1;
  40          sbit pitchButton = P2 ^ 0;
  41          
  42          void setup() {
  43   1      //  timer0_initialize();
  44   1        P2 = 0xFF;
  45   1      //  start_count = timer0_count();
  46   1      }
  47          
  48          void delay(unsigned d) {
  49   1        TMOD = 0x01;
  50   1        TH0 = d >> 8;
  51   1        TL0 = d;
  52   1        TR0 = 1;
  53   1        while (TF0 == 0);
  54   1        TR0 = 0;
C51 COMPILER V9.57.0.0   MAIN                                                              03/09/2018 18:00:27 PAGE 2   

  55   1        TF0 = 0;
  56   1      }
  57          
  58          void loop() {
  59   1        resValues = invert(P2); // assign to resValues reversed in numeric order values of photoresistors
  60   1        resValues = ~resValues; // Inverse values of resistors to match 1 -- high, 0 -- low
  61   1        P1 = resValues; // Display active notes on LEDs
  62   1      
  63   1        if ((P2 >> 1) != 0)
  64   1          out = ~out;
  65   1        
  66   1        if (A) {
  67   2          delay(0xF880);
  68   2        } else if (_B) {
  69   2          delay(0xF955);
  70   2        } else if (C) {
  71   2          delay(0xFA00);
  72   2        } else if (D) {
  73   2          delay(0xFAAB);
  74   2        } else if (E) {
  75   2          delay(0xFB00);
  76   2        } else if (F) {
  77   2          delay(0xFB80);
  78   2        } else if (G) {
  79   2          delay(0xFC00);
  80   2        } else {
  81   2          diff = 0;
  82   2        }
  83   1        
  84   1      //  diff /= 16;
  85   1      //  
  86   1      //  current_count = timer0_count();
  87   1      //  if ((diff != 0) && (current_count - start_count >= diff)) {
  88   1      //    start_count = current_count;
  89   1      //    P3_4 ^= 1;
  90   1      //  } else {
  91   1      //    P3_4 = 0;
  92   1      //  }
  93   1      
  94   1      }
  95          
  96          /*------------------------------------------------
  97          MAIN C Function
  98          ------------------------------------------------*/
  99          
 100          void main (void) {
 101   1        setup();
 102   1        
 103   1        while (1) 
 104   1          loop();
 105   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    164    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      8    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.

C51 COMPILER V9.57.0.0   MAIN                                                              03/09/2018 18:00:27 PAGE 3   


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
